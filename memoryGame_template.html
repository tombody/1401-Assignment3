<html>
	<head>
		<title>Memory Game</title>
	</head>
	<body>

		<div id='titleArea' style="text-align: center"></div>
		<hr>
		<div id='gameArea'></div>
		<div id='buttonArea' style="text-align: center"></div>

		<script>
		//-----------------------------------------------------------------------------
		//Constants
		SIZE = 52;
		PAIR = 2;
		SUITS = new Array('Spade', 'Heart', 'Diamond', 'Club');
		
		//-----------------------------------------------------------------------------
		//Variables
		var titleArea = document.getElementById("titleArea");
		var gameArea = document.getElementById("gameArea");
		var buttonArea = document.getElementById("buttonArea");

		//Stores the setTimeout object
		var gameTimer;

		//Preloads the backCard image
		var preloadBackCard = new Image();
		preloadBackCard.src = 'back.gif'

		//Preloads the card images
		var preloadImages = [];
		for(i=0; i<52; i++){
				preloadImages[i] = new Image();
				preloadImages[i].src = i+'.png';		
			}

		//Stores the IDs for all the cards
		var cardSet = [];		
		
		//Stores the IDs of the two cards the player is choosing currently
		var guessCards = [];

		//Stores the IDs of cards player has guessed correctly
		var pairCards = []

		//-----------------------------------------------------------------------------
		//Functions

		//Sets up the cards in a HTML table and sets up a unique ID for each image.
		function setGame(){
			//Creates HTML string to insert into gameArea.innerHTML
			var gameAreaHTML;
			gameAreaHTML="<table border='1'>";
			for (i=0; i<4; i++){
				gameAreaHTML+="<tr>";
				for (j=0; j<13; j++){
					var id=j+i*13;
					gameAreaHTML+=('<td><image id="'+id+'" src='+preloadBackCard.src+' width=140 onclick="selectCard(id)"></td>');
				}
				gameAreaHTML+="</tr>";
			}
			gameAreaHTML+="</table>";
			gameArea.innerHTML=gameAreaHTML;

			//Stores the unique IDs for each card
			for(i=0; i<52; i++){
				cardSet[i]=document.getElementById(i);
			}
			
			//Sets up the buttons in buttonArea
			buttonArea.innerHTML='<p> <input id="stopGame" type="button" value="Stop Game" onclick="stopGame();"/> <input id="showCards" type="button" value="Show Cards" onclick="showCard();"/> <input id="flipCards" type="button" value="Flip Cards" onclick="flipCard();"/> </p>'
		}

		//Turns all cards face up
		function showCard(cardId){
			// var imageRef=document.getElementById(cardId);
			// for(i=0; i<52; i++){

			// }
		}

		function flipCard(){
			alert("working");
		}

		function isPairedCard(){

		}

		function sortCards(){

		}

		//Starts a new game. Called on startup
		function playGame(){
			//In this part
			//A loop that accesses each element in preloadImages and cardSet


			//Resets the guess and pair arrays
			guessCards=[];
			pairCards=[];

			//Reshuffles cards
			//shuffleCards(cardSet);

			//Flips all the cards back over
			//flipCard(0);

			//Resets the timer
			resetTimer(60);
		}

		//Reprints the title with the countdown timer
		function resetTimer(sec){
			titleArea.innerHTML="<h1>Memory Game (Time Left: "+sec+" seconds)</h1>";
			gameTimer=setTimeout(function counter(){
				if(sec>=0){
					resetTimer(sec)
				}else{
					stopGame();
				}
			},1000);
			sec--;
		}

		//Stops the game when the button is clicked or the timer runs out
		function stopGame(){
			clearTimeout(gameTimer);
		}

		function shuffleCards(array){

		}

		function selectCard(cardId){
			alert(cardId);
		}		
		
		//-----------------------------------------------------------------------------
		//Statements that run when page loads

		setGame();
		playGame();

		</script>
	</body>
</html>